<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BrewMaster 3000 - Mick's Bar Utility</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script> 
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        /* (Existing CSS styles from your original code are here, adjusted for new status colors) */
        @keyframes float { 0%, 100% { transform: translateY(0) rotate(0deg); } 50% { transform: translateY(-20px) rotate(5deg); } }
        .animate-float { animation: float 8s ease-in-out infinite; }
        .animation-delay-1000 { animation-delay: 1s; }
        .animation-delay-2000 { animation-delay: 2s; }
        .animation-delay-3000 { animation-delay: 3s; }
        @keyframes bubbles { 0% { transform: translateY(0) scale(1); opacity: 0; } 50% { opacity: 0.8; } 100% { transform: translateY(-100px) scale(1.5); opacity: 0; } }
        .bubble { position: absolute; background: rgba(255,255,255,0.2); border-radius: 50%; animation: bubbles 3s infinite; }
        :root {
            --primary: #f59e0b;
            --primary-dark: #d97706;
            --secondary: #10b981;
            --danger: #ef4444;
            --warning: #f97316; /* Added warning color */
            --dark: #1e293b;
        }
        
        .beer-glass { width: 80px; height: 120px; background: linear-gradient(to right, rgba(255,255,255,0.05), rgba(255,255,255,0.1)); border-radius: 0 0 40px 40px; position: relative; overflow: hidden; margin: 0 auto 15px; border: 3px solid rgba(255,255,255,0.2); box-shadow: inset 0 0 15px rgba(255,255,255,0.1), 0 5px 20px rgba(0,0,0,0.3); transform-style: preserve-3d; perspective: 1000px; }
        .beer-foam { position: absolute; top: 0; width: 100%; height: 25px; background: linear-gradient(to bottom, rgba(255,255,255,0.4), rgba(255,255,255,0.2)); border-radius: 50% 50% 0 0; box-shadow: inset 0 -5px 10px rgba(255,255,255,0.2); z-index: 2; }
        .beer-liquid { position: absolute; bottom: 0; width: 100%; background: linear-gradient(to bottom, rgba(245, 158, 11, 0.9), rgba(217, 119, 6, 0.9)); transition: height 0.5s ease; box-shadow: inset 0 0 30px rgba(0,0,0,0.2); z-index: 1; }
        .beer-progress { height: 20px; background-color: #334155; border-radius: 10px; overflow: hidden; margin: 10px 0; box-shadow: inset 0 2px 4px rgba(0,0,0,0.2); }
        .beer-fill { height: 100%; background: linear-gradient(90deg, var(--primary), var(--primary-dark)); border-radius: 10px; transition: width 0.5s ease; position: relative; overflow: hidden; }
        .status-circle { display: inline-block; width: 10px; height: 10px; border-radius: 50%; margin-left: 5px; box-shadow: 0 0 5px currentColor; }
        .status-connected { background-color: var(--secondary); color: var(--secondary); }
        .status-disconnected { background-color: var(--danger); color: var(--danger); }
        .tap-card, .sensor-card, .media-card { position: relative; overflow: hidden; border: 1px solid rgba(255,255,255,0.05); backdrop-filter: blur(5px); transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); }
        .glow-text { text-shadow: 0 0 8px rgba(245, 158, 11, 0.5); }
        .live-stream { position: relative; backdrop-filter: blur(5px); }
        
        /* New: System Health Indicator */
        .health-indicator {
            width: 15px; height: 15px; border-radius: 50%; 
            margin-right: 8px; box-shadow: 0 0 8px currentColor;
        }
        .health-green { background-color: var(--secondary); }
        .health-yellow { background-color: var(--warning); animation: pulse-yellow 1s infinite alternate; }
        .health-red { background-color: var(--danger); animation: pulse-red 1s infinite alternate; }
        
        @keyframes pulse-yellow { 0% { opacity: 1; } 100% { opacity: 0.5; } }
        @keyframes pulse-red { 0% { transform: scale(1); } 100% { transform: scale(1.1); } }
        
        /* Utility Button Styles */
        .utility-btn {
            display: flex; align-items: center; justify-content: center;
            padding: 0.75rem 1rem; border-radius: 0.5rem; font-weight: 600;
            transition: all 0.2s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .btn-red { background-color: #dc2626; color: white; }
        .btn-red:hover { background-color: #b91c1c; transform: translateY(-1px); }
        .btn-blue { background-color: #3b82f6; color: white; }
        .btn-blue:hover { background-color: #2563eb; transform: translateY(-1px); }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-900 to-gray-800 text-white font-poppins min-h-screen">
    <div class="container mx-auto px-4 py-8 relative overflow-hidden">
            <header class="text-center mb-12 relative z-10" data-aos="fade-down">
            <div class="inline-block px-6 py-2 bg-gray-800 rounded-full border border-gray-700 mb-4">
                <p class="text-sm text-yellow-300 flex items-center justify-center">
                    <span id="system-health" class="health-indicator health-green"></span>
                    MICK'S BAR SYSTEM STATUS
                </p>
            </div>
            <h1 class="text-4xl md:text-5xl font-bold text-yellow-400 mb-2 glow-text tracking-tight group">
                <span class="bg-clip-text text-transparent bg-gradient-to-r from-yellow-400 via-yellow-300 to-yellow-500 transition-all duration-500 group-hover:from-yellow-300 group-hover:to-yellow-400">
                    BrewMaster 3000
                </span>
                <span class="text-2xl align-super ml-2 text-yellow-500 opacity-70 transition-all duration-500 group-hover:opacity-100 group-hover:text-yellow-300">üç∫</span>
            </h1>
<p class="text-gray-300 max-w-2xl mx-auto text-lg leading-relaxed">
                <span class="bg-gray-800/50 px-2 py-1 rounded-lg border border-gray-700 backdrop-blur-sm">
                    Real-time monitoring and control of your beer dispensing system.
                </span>
            </p>
        </header>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6">
            <div class="tap-card bg-gradient-to-br from-gray-800 to-gray-700 rounded-lg p-4 shadow-md" data-aos="fade-up" data-aos-delay="100">
                <div class="flex items-center justify-between mb-3 relative z-10">
                    <h3 class="text-lg font-semibold text-yellow-400 flex items-center">Tap 1</h3>
                    <span class="text-xs font-bold bg-yellow-900 text-yellow-200 px-2 py-1 rounded-full">ACTIVE</span>
                </div>
                <div class="beer-glass mb-4"><div class="beer-foam"></div><div id="tap1-liquid" class="beer-liquid" style="height: 75%;"></div></div>
                <div class="mb-4 relative z-10">
                    <p class="text-gray-400">Name: <span class="text-white font-medium">Lager</span></p>
                    <p class="text-gray-400">ABV: <span class="text-white font-medium">5.2%</span></p>
                </div>
<div class="mb-4">
                    <div class="flex justify-between text-sm text-gray-400 mb-1">
                        <span>Fill Level</span>
                        <span id="tap1-level-text">75%</span>
                    </div>
                    <div class="beer-progress">
                        <div id="tap1-fill" class="beer-fill" style="width: 75%;"></div>
                    </div>
                </div>
                <div class="text-sm text-gray-400">
                    <p class="flex items-center"><i data-feather="clock" class="w-4 h-4 mr-2"></i> Last refilled: 5 days ago</p>
                    <p class="flex items-center mt-1"><i data-feather="activity" class="w-4 h-4 mr-2"></i> Status: <span class="ml-1 text-green-400">Ready</span></p>
                </div>
            </div>

            <div class="tap-card bg-gray-800 rounded-lg p-4 shadow-md" data-aos="fade-up" data-aos-delay="200">
                <div class="flex items-center justify-between mb-3">
                    <h3 class="text-lg font-semibold text-yellow-400">Tap 2</h3>
                    <span class="text-xs bg-gray-700 text-gray-400 px-2 py-1 rounded-full">Inactive</span>
                </div>
                <div class="mb-4">
                    <p class="text-gray-400">Name: <span class="text-white font-medium">Empty</span></p>
                    <p class="text-gray-400">ABV: <span class="text-white font-medium">-</span></p>
                </div>
                <div class="mb-4">
                    <div class="beer-progress"><div class="beer-fill" style="width: 0%;"></div></div>
                </div>
                <div class="text-sm text-gray-400">
                    <p class="flex items-center"><i data-feather="clock" class="w-4 h-4 mr-2"></i> Last refilled: Never</p>
                    <p class="flex items-center mt-1"><i data-feather="activity" class="w-4 h-4 mr-2"></i> Status: <span class="ml-1 text-red-400">Offline</span></p>
                </div>
            </div>

            <div class="tap-card bg-gray-800 rounded-lg p-4 shadow-md" data-aos="fade-up" data-aos-delay="300">
                <div class="flex items-center justify-between mb-3">
                    <h3 class="text-lg font-semibold text-yellow-400">Tap 3</h3>
                    <span class="text-xs bg-gray-700 text-gray-400 px-2 py-1 rounded-full">Inactive</span>
                </div>
                <div class="mb-4">
                    <p class="text-gray-400">Name: <span class="text-white font-medium">Empty</span></p>
                    <p class="text-gray-400">ABV: <span class="text-white font-medium">-</span></p>
                </div>
                <div class="mb-4">
                    <div class="beer-progress"><div class="beer-fill" style="width: 0%;"></div></div>
                </div>
                <div class="text-sm text-gray-400">
                    <p class="flex items-center"><i data-feather="clock" class="w-4 h-4 mr-2"></i> Last refilled: Never</p>
                    <p class="flex items-center mt-1"><i data-feather="activity" class="w-4 h-4 mr-2"></i> Status: <span class="ml-1 text-red-400">Offline</span></p>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="sensor-card bg-gradient-to-br from-gray-800 to-gray-700 rounded-lg p-4 shadow-md" data-aos="fade-right">
                    <div class="flex items-center mb-3">
                        <div class="p-2 rounded-md bg-blue-900/50 mr-3 backdrop-blur-sm">
                            <i data-feather="thermometer" class="text-blue-300"></i>
                        </div>
                        <h3 class="text-lg font-semibold text-blue-200">Fridge Conditions</h3>
                    </div>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Temperature:</span>
                            <span id="fridgeTemp" class="text-xl font-bold">21.5 ¬∞C</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Humidity:</span>
                            <span id="fridgeHumidity" class="text-xl font-bold">45 %</span>
                        </div>
                        <div class="mt-4 pt-4 border-t border-gray-700">
                            <p class="text-sm text-gray-400 flex items-center">
                                <i data-feather="alert-circle" class="w-4 h-4 mr-2"></i>
                                <span id="fridgeStatus">Sensor connected</span>
                            </p>
                        </div>
                    </div>
                </div>
                <div class="sensor-card bg-gray-800 rounded-lg p-4 shadow-md" data-aos="fade-left">
                    <div class="flex items-center mb-3">
                        <div class="p-2 rounded-md bg-purple-900 bg-opacity-50 mr-3">
                            <i data-feather="cpu" class="text-purple-300"></i>
                        </div>
                        <h3 class="text-lg font-semibold">Enclosure Conditions</h3>
                    </div>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Temperature:</span>
                            <span id="enclosureTemp" class="text-xl font-bold">23.1 ¬∞C</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Humidity:</span>
                            <span id="enclosureHumidity" class="text-xl font-bold">38 %</span>
                        </div>
                        <div class="mt-4 pt-4 border-t border-gray-700">
                            <p class="text-sm text-gray-400 flex items-center">
                                <i data-feather="alert-circle" class="w-4 h-4 mr-2"></i>
                                <span id="enclosureStatus">Sensor connected</span>
                            </p>
                        </div>
                    </div>
                </div>
                <div class="media-card bg-gradient-to-br from-gray-800 to-gray-700 rounded-lg p-4 shadow-md md:col-span-2" data-aos="fade-up">
                    <div class="flex items-center mb-3">
                        <div class="p-2 rounded-md bg-green-700/50 mr-3 backdrop-blur-sm">
                            <i data-feather="music" class="text-green-300"></i>
                        </div>
                        <h3 class="text-lg font-semibold text-green-200">What's Playing?</h3>
                        <span id="player-status" class="ml-auto text-sm font-semibold text-green-400">LIVE</span>
                    </div>
                    <div class="flex items-center space-x-4">
                        <img id="album-art" src="https://via.placeholder.com/60/d1d5db/000000?text=ART" class="w-16 h-16 rounded shadow-md" alt="Album Art">
                        <div class="truncate">
                            <p id="song-title" class="text-lg font-bold truncate">Heat Waves</p>
                            <p id="song-artist" class="text-gray-400 truncate">Glass Animals</p>
                        </div>
                    </div>
                    <div class="flex justify-between items-center mt-3 text-gray-500 text-xs">
                        <span id="current-time">1:45</span>
                        <div class="w-full h-1 bg-gray-700 mx-2 rounded-full">
                            <div id="song-progress" class="h-1 bg-green-400 rounded-full" style="width: 50%;"></div>
                        </div>
                        <span id="total-time">3:58</span>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 gap-4">
                <div class="live-stream bg-gradient-to-br from-gray-800 to-gray-700 rounded-lg p-4 shadow-md border border-gray-700" data-aos="fade-up">
                    <div class="flex items-center mb-3">
                        <div class="p-2 rounded-md bg-red-900/50 mr-3 backdrop-blur-sm">
                            <i data-feather="video" class="text-red-300"></i>
                        </div>
                        <h3 class="text-lg font-semibold text-red-200">Noosa Heads Surf Cam üèÑ</h3>
                    </div>
                    <div class="aspect-w-16 aspect-h-9 bg-black rounded-md overflow-hidden border border-gray-700 relative">
                        <video id="noosa-surf-cam" controls muted autoplay class="w-full h-full object-cover"></video>
                        <div class="absolute bottom-4 left-4 bg-black/70 text-white px-2 py-1 rounded text-xs">LIVE HLS</div>
                    </div>
                </div>

                <div class="sensor-card bg-gradient-to-br from-gray-800 to-gray-700 rounded-lg p-4 shadow-md border border-gray-700" data-aos="fade-up">
                    <div class="flex items-center mb-3">
                        <div class="p-2 rounded-md bg-sky-900/50 mr-3 backdrop-blur-sm">
                            <i data-feather="cloud-snow" class="text-sky-300"></i>
                        </div>
                        <h3 class="text-lg font-semibold text-sky-200">Noosa Surf & Tide Data</h3>
                    </div>
                    <div class="grid grid-cols-3 gap-2 text-center">
                        <div class="bg-gray-700/50 p-2 rounded-lg">
                            <p class="text-xs text-gray-400">Wave Height</p>
                            <p id="wave-height" class="text-xl font-bold text-sky-400">1.2 m</p>
                        </div>
                        <div class="bg-gray-700/50 p-2 rounded-lg">
                            <p class="text-xs text-gray-400">Wind Speed</p>
                            <p id="wind-speed" class="text-xl font-bold text-sky-400">10 kn NE</p>
                        </div>
                        <div class="bg-gray-700/50 p-2 rounded-lg">
                            <p class="text-xs text-gray-400">Next High Tide</p>
                            <p id="next-tide" class="text-xl font-bold text-sky-400">11:35 AM</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="bg-gradient-to-br from-gray-800 to-gray-700 rounded-lg p-4 shadow-md text-xs text-gray-300 border border-gray-700" data-aos="fade-up">
            <div class="grid grid-cols-1 md:grid-cols-5 gap-4 relative z-10">
                <div class="md:col-span-2">
                    <p class="text-sm font-semibold text-white mb-2">System Operations</p>
                    <div class="grid grid-cols-2 gap-2">
                        <button id="toggleCooling" class="utility-btn btn-blue">
                            <i data-feather="power" class="w-4 h-4 mr-2"></i> Toggle Cooling
                        </button>
                        <button id="remoteReboot" class="utility-btn btn-red">
                            <i data-feather="alert-triangle" class="w-4 h-4 mr-2"></i> Remote Reboot
                        </button>
                    </div>
                </div>
                <div class="md:col-span-3 grid grid-cols-3 gap-3">
                    <div>
                        <p class="flex items-center mb-2"><i data-feather="wifi" class="w-4 h-4 mr-2"></i> WiFi: Connected</p>
                        <p class="flex items-center"><i data-feather="clock" class="w-4 h-4 mr-2"></i> Uptime: 2 days 5 hours</p>
                    </div>
                    <div>
                        <p class="flex items-center mb-2"><i data-feather="cpu" class="w-4 h-4 mr-2"></i> ESP32/ESP8266</p>
                        <p class="flex items-center"><i data-feather="hard-drive" class="w-4 h-4 mr-2"></i> Free Mem: 24KB</p>
                    </div>
                    <div>
                        <p class="flex items-center mb-2"><i data-feather="refresh-cw" class="w-4 h-4 mr-2"></i> Last update: <span id="lastUpdate">Just now</span></p>
                        <p class="flex items-center"><i data-feather="git-commit" class="w-4 h-4 mr-2"></i> Version: 1.0.0</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- DATA SIMULATION ---
        const CRITICAL_TEMP = 8.0; // ¬∞C
        const WARNING_TEMP = 6.0;  // ¬∞C
        const CRITICAL_FILL = 10;  // %
        const KEG_PINTS_MAX = 52;

        const songData = [
            { title: "Heat Waves", artist: "Glass Animals", progress: 50, time: "1:45 / 3:58", art: "https://via.placeholder.com/60/10b981/000000?text=HW" },
            { title: "Blinding Lights", artist: "The Weeknd", progress: 75, time: "2:50 / 3:20", art: "https://via.placeholder.com/60/ef4444/000000?text=BL" },
            { title: "Mr. Brightside", artist: "The Killers", progress: 10, time: "0:25 / 3:42", art: "https://via.placeholder.com/60/f59e0b/000000?text=MB" }
        ];

        let songIndex = 0;
        let isCoolingOn = true;
        let simulatedFridgeTemp = 21.5; // Starts high for testing alert

        function fetchSensorData() {
             // In a real ESP32, this would be a single JSON fetch
            return new Promise(resolve => {
                const now = new Date();
                resolve({
                    tap1_level: 75,
                    fridgeTemp: simulatedFridgeTemp,
                    fridgeHumidity: 45,
                    enclosureTemp: 23.1,
                    enclosureHumidity: 38,
                    co2Weight: 3.2,
                    gasWeight: 8.5,
                    fridgeSensorConnected: true,
                    enclosureSensorConnected: true,
                    timestamp: now.toTimeString().split(' ')[0],
                    isCoolingOn: isCoolingOn
                });
            });
        }

        // --- CORE UI UPDATE LOGIC ---
        
        function updateHealthIndicator(temp, level) {
            const indicator = document.getElementById('system-health');
            indicator.classList.remove('health-green', 'health-yellow', 'health-red');
            
            if (temp >= CRITICAL_TEMP || level <= CRITICAL_FILL) {
                indicator.classList.add('health-red');
            } else if (temp >= WARNING_TEMP || level <= 20) { // 20% warning
                indicator.classList.add('health-yellow');
            } else {
                indicator.classList.add('health-green');
            }
        }
        
        function updateMediaCard() {
            const data = songData[songIndex];
            document.getElementById('song-title').textContent = data.title;
            document.getElementById('song-artist').textContent = data.artist;
            document.getElementById('album-art').src = data.art;
            const times = data.time.split(' / ');
            document.getElementById('current-time').textContent = times[0];
            document.getElementById('total-time').textContent = times[1];
            document.getElementById('song-progress').style.width = `${data.progress}%`;

            songIndex = (songIndex + 1) % songData.length;
        }

        function handleCoolingToggle(isOn) {
            const button = document.getElementById('toggleCooling');
            button.innerHTML = isOn 
                ? '<i data-feather="power" class="w-4 h-4 mr-2"></i> Cooling ON'
                : '<i data-feather="power" class="w-4 h-4 mr-2"></i> Cooling OFF';
            
            button.classList.remove('btn-blue', 'btn-red');
            button.classList.add(isOn ? 'btn-blue' : 'btn-red');

            // In a real ESP32, this would send an AJAX request:
            // fetch(`/api/control/cooling?state=${isOn ? 'on' : 'off'}`);
        }

        async function updateAllData() {
            try {
                const data = await fetchSensorData(); 
                
                // Temp/Humidity/Weight
                document.getElementById("fridgeTemp").textContent = data.fridgeTemp.toFixed(1) + " ¬∞C";
                // ... (other sensor updates)

                // Tap Level (Applying color alert logic)
                document.getElementById('tap1-level-text').textContent = data.tap1_level + "%";
                document.getElementById('tap1-fill').style.width = data.tap1_level + "%";
                document.getElementById('tap1-liquid').style.height = data.tap1_level + "%";

                // Fridge Temp Alert
                const tempEl = document.getElementById('fridgeTemp');
                tempEl.classList.remove('text-red-400', 'text-yellow-400', 'text-white');
                if (data.fridgeTemp >= CRITICAL_TEMP) {
                    tempEl.classList.add('text-red-400');
                    document.getElementById('fridgeStatus').textContent = 'CRITICAL: TEMP HIGH';
                } else if (data.fridgeTemp >= WARNING_TEMP) {
                    tempEl.classList.add('text-yellow-400');
                    document.getElementById('fridgeStatus').textContent = 'WARNING: Temp Rising';
                } else {
                    tempEl.classList.add('text-white');
                    document.getElementById('fridgeStatus').textContent = 'Cooling OK';
                }

                // System Health Indicator
                updateHealthIndicator(data.fridgeTemp, data.tap1_level);

                // Update timestamps
                document.getElementById("lastUpdate").textContent = `Updated at ${data.timestamp}`;
                
                // Update cooling button state
                handleCoolingToggle(data.isCoolingOn);

                feather.replace(); 
            } catch (error) {
                console.error("Error updating dashboard:", error);
            }
        }
        
        // --- EVENT LISTENERS ---
        
        // 1. Power Toggle/Remote Reset Functionality
        document.getElementById('toggleCooling').addEventListener('click', () => {
            isCoolingOn = !isCoolingOn;
            // Simulate temperature drop/rise over time if control is toggled
            simulatedFridgeTemp = isCoolingOn ? 4.5 : 21.5; 
            updateAllData();
        });
        
        document.getElementById('remoteReboot').addEventListener('click', () => {
            alert("Sending reboot command to ESP32... (Simulated)");
            // In a real ESP32, this would be: fetch('/api/control/reboot');
        });

        // --- HLS Stream Initialization ---
        function initHlsStream() {
            const video = document.getElementById('noosa-surf-cam');
            const hlsUrl = 'https://stream.n1.au.swellnet.com/surfcams/noosa-heads.stream/playlist.m3u8';
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(hlsUrl);
                hls.attachMedia(video);
                hls.on(Hls.Events.MANIFEST_PARSED, function() { video.play(); });
            } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                video.src = hlsUrl;
                video.addEventListener('loadedmetadata', function() { video.play(); });
            }
        }

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            AOS.init({ duration: 800, once: true });
            
            // Initial data load and continuous polling
            updateMediaCard(); // Initial media load
            updateAllData(); 
            initHlsStream();
            
            // Poll data every 5 seconds, media every 15 seconds
            setInterval(updateAllData, 5000); 
            setInterval(updateMediaCard, 15000); 
        });
    </script>
</body>
</html>
